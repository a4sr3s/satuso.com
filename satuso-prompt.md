# Satuso: SPIN-Native CRM

## Positioning

**Core Identity:** SPIN-native CRM that makes discovery your competitive advantage.

This is the only CRM built around how modern selling actually works. SPIN methodology is the core, not a feature. Start as a Salesforce companion (pipeline hygiene + discovery tool), become the system of record later.

### Taglines
- "Win more deals through better discovery"
- "The CRM that teaches you to sell"
- "SPIN-native. AI-powered. Actually useful."

### Target Market

**Primary:** Sales teams (10-100 reps) who:
- Already use Salesforce/HubSpot and hate it
- Care about deal quality over deal quantity
- Have adopted or want to adopt consultative selling (SPIN, Challenger, MEDDIC)

### Wedge Strategy

**Phase 1: Salesforce Companion**
"Salesforce companion" ‚Äî pipeline hygiene + SPIN discovery tool that syncs bidirectionally with Salesforce. Zero migration risk, immediate ROI.

**Phase 2: System of Record**
Full CRM replacement once users trust Satuso as source of truth.

---

## Design System

### Color Palette (Cloudflare-Inspired Monochrome)

```css
colors: {
  primary: {
    DEFAULT: '#171717',  /* Near black */
    hover: '#262626',
    light: '#F5F5F5',
  },
  surface: '#FAFAFA',
  surface-hover: '#F5F5F5',
  sidebar: '#FFFFFF',
  text-primary: '#171717',
  text-secondary: '#525252',
  text-muted: '#A3A3A3',
  border: '#E5E5E5',
  border-light: '#F5F5F5',
  
  /* Semantic colors - use sparingly for meaning */
  success: '#22C55E',
  error: '#EF4444',
  warning: '#F59E0B',
  info: '#3B82F6',
}
```

### Typography
- **Font Family:** Inter (system fallback: -apple-system, sans-serif)
- **Headings:** Semi-bold (600)
- **Body:** Regular (400)
- **Monospace:** JetBrains Mono for code/data

### Component Style
- **Border Radius:** 6px (subtle, not rounded)
- **Shadows:** Minimal, only for elevation (modals, dropdowns)
- **Spacing:** 4px base unit
- **Density:** Comfortable but efficient

---

## Navigation Structure

```
Sidebar:
‚îú‚îÄ‚îÄ üè† Home (Dashboard)
‚îú‚îÄ‚îÄ üìä Workboards ‚ñæ
‚îÇ   ‚îú‚îÄ‚îÄ Pipeline Board
‚îÇ   ‚îú‚îÄ‚îÄ Discovery Tracker  
‚îÇ   ‚îú‚îÄ‚îÄ Stale Deals
‚îÇ   ‚îú‚îÄ‚îÄ + New Workboard
‚îú‚îÄ‚îÄ üí∞ Deals
‚îú‚îÄ‚îÄ üë• Contacts
‚îú‚îÄ‚îÄ üè¢ Companies
‚îÇ
‚îú‚îÄ‚îÄ [SPIN]
‚îú‚îÄ‚îÄ üéØ SPIN Coach
‚îú‚îÄ‚îÄ üìà Discovery Analytics
‚îÇ
‚îú‚îÄ‚îÄ [PLAYS]
‚îú‚îÄ‚îÄ ‚ö° Active Plays
‚îú‚îÄ‚îÄ üìö Play Library
‚îÇ
‚îú‚îÄ‚îÄ [AI]
‚îú‚îÄ‚îÄ ‚ú® Command Center
‚îÇ
‚îú‚îÄ‚îÄ ‚öôÔ∏è Settings
```

---

## Core Features

### Workboards (Primary UI Paradigm)

Workboards are programmable table views that replace traditional list views. Any object (Deals, Contacts, Companies) can be opened as a Workboard.

**Why Workboards:**
- Users feel like they're building, not "using a CRM"
- Every column can be computed, enriched, or AI-generated
- Filters, sorts, and views are saveable and shareable
- This is the UX pattern that made Airtable, Notion, and Clay feel powerful

#### Column Types

1. **Raw Fields** ‚Äî Standard CRM data (name, email, stage, amount)

2. **Formula Fields** ‚Äî Computed from other fields
   - `days_in_stage` = today - stage_changed_date
   - `sla_breach` = days_in_stage > 14 AND stage = "Proposal"

3. **AI Fields** ‚Äî Generated by Workers AI
   - `risk_reason` ‚Äî Why this deal might slip
   - `next_step_suggestion` ‚Äî AI-recommended action
   - `spin_gap` ‚Äî Which SPIN element is weakest

4. **Enrichment Fields** ‚Äî Pulled from external sources
   - `company_size` ‚Äî From Clearbit/Apollo
   - `tech_stack` ‚Äî From BuiltWith
   - `hiring_signals` ‚Äî From LinkedIn

#### Provenance & Freshness (Critical)

Every AI/enriched cell displays:
- **Source indicator** (icon: üìû call transcript, üìß email, üîç enrichment, ü§ñ AI inference)
- **Timestamp** ("Updated 2 days ago")
- **Freshness state:** Current (green) | Stale (yellow) | Unknown (gray)
- **Hover to see full provenance:** "Extracted from call with Jane Smith on Jan 15"
- **Recompute button** (‚Üª) to refresh on demand

#### Default Workboards (ship with product)

1. **Pipeline Board** ‚Äî All deals with SPIN progress, days in stage, next step, risk score
2. **Discovery Tracker** ‚Äî Deals filtered by incomplete SPIN, sorted by value
3. **Stale Deals** ‚Äî No activity in 14+ days
4. **This Week's Commits** ‚Äî Deals with close date this week, sorted by confidence

---

### SPIN Discovery Engine

SPIN is the nervous system of Satuso, not a sidebar feature.

#### SPIN Completeness Score

Every deal has a SPIN Score (0-100) computed as:
- **Situation:** 25 points (captured + verified)
- **Problem:** 25 points (captured + quantified)
- **Implication:** 25 points (business impact articulated)
- **Need-Payoff:** 25 points (buyer verbalized value)

Partial credit for incomplete elements. Score appears on deal cards, Workboard columns, and filters.

#### SPIN-Based Deal Qualification

Deals cannot advance past "Qualified" stage without:
- Situation: At least 2 facts captured
- Problem: At least 1 explicit problem stated

Deals cannot advance past "Proposal" without:
- Implication: Business impact quantified
- Need-Payoff: Buyer has articulated desired outcome

*(Configurable, not enforced by default)*

#### SPIN Auto-Extraction Pipeline

When a call transcript or email thread is ingested:

1. **Queue Job** ‚Äî Transcript sent to Cloudflare Queue
2. **AI Extraction** ‚Äî Workers AI extracts SPIN candidates
   - Each insight tagged with confidence score (high/medium/low)
   - Source reference (timestamp in call, email snippet)
3. **Human Validation** ‚Äî Rep sees extracted insights with "Confirm / Edit / Reject" UI
4. **Write to Deal** ‚Äî Confirmed insights populate SPIN fields
5. **Score Update** ‚Äî SPIN completeness score recalculated

**AI Prompt for Extraction:**
```
Analyze this sales conversation. Extract:
- SITUATION facts: Current state, team size, tools, process
- PROBLEM statements: Pain points, frustrations, inefficiencies  
- IMPLICATION questions/statements: Business impact, cost of inaction
- NEED-PAYOFF statements: Desired outcomes, value articulation

Return JSON with quotes, timestamps, and confidence scores.
```

#### SPIN Coach Panel

On every deal detail view, the SPIN Coach shows:
- Current SPIN progress with visual indicators
- AI-suggested questions to ask next
- Gap analysis ("Missing implication data")
- Related insights from similar won deals

---

### Plays (Workflow Templates)

Plays are pre-built combinations of Workboards + Automations + Actions that solve specific problems.

#### Play Anatomy
- **Workboard** ‚Äî A configured view with the right columns/filters
- **Triggers** ‚Äî When to run (schedule, event, manual)
- **Actions** ‚Äî What happens (create task, send alert, update field, draft email)
- **Success Metric** ‚Äî How to measure if it's working

#### Shipped Plays (v1)

**1. SPIN Discovery Completion**
- Workboard: Deals with SPIN score < 75, sorted by close date
- Trigger: Daily at 8am
- Action: Create task "Complete SPIN discovery" for deal owner
- Metric: Average SPIN score improvement

**2. Pipeline Hygiene Autopilot**
- Workboard: Deals with no activity in 14+ days
- Trigger: Daily
- Action: Alert deal owner, suggest next step, optionally auto-create task
- Metric: Reduction in stale deals

**3. At-Risk Deal Radar**
- Workboard: Deals where AI risk_score > 70
- Trigger: Real-time on score change
- Action: Alert manager + deal owner with risk reasons
- Metric: Save rate on flagged deals

**4. Stage Advancement Audit**
- Workboard: Deals that changed stage in last 7 days
- Trigger: Weekly
- Action: AI reviews if stage change has evidence (meeting, email, call)
- Metric: False advancement rate

**5. Weekly Manager Review Board**
- Workboard: Team's deals by stage, with SPIN scores, last activity, risk
- Trigger: Monday 7am
- Action: Generate summary email to manager
- Metric: Manager time saved on pipeline review

---

### Actions (Write-Back Layer)

Actions are the verbs of Satuso. They let AI insights and automations actually do things.

#### Action Types

1. **Create Task** ‚Äî Assign to user with due date, linked to record
2. **Draft Email** ‚Äî AI-generated, opens in composer for review
3. **Update Field** ‚Äî Change stage, owner, custom field
4. **Set Next Step** ‚Äî Populate next_step + next_step_date
5. **Add Note** ‚Äî Append to activity timeline
6. **Push to Sequence** ‚Äî Send to external tool (Outreach, Apollo, etc.)
7. **Create Follow-up** ‚Äî Schedule a future task based on deal state
8. **Alert** ‚Äî In-app notification + optional email/Slack

#### Bulk Actions

Actions can run on single records OR across Workboard selections (up to 500 records).

**Example:** Select 50 deals missing Implication ‚Üí Action: "AI Draft Implication Questions" ‚Üí Creates task for each deal with suggested questions based on their Situation and Problem.

---

### Command Palette

Global search and command interface (Cmd+K):
- Search across all entities
- Quick actions ("Create deal", "Log call")
- AI natural language queries ("Show me deals closing this month with low SPIN scores")
- Recent items and navigation

---

### Dashboard

Home view showing:
- Key metrics (revenue, active deals, conversion rate, tasks due)
- SPIN score distribution across pipeline
- At-risk deals requiring attention
- Recent activity timeline
- Quick actions

---

## Technical Architecture

### Stack

- **Frontend:** React 18 + Vite + TailwindCSS
- **State:** React Query (TanStack Query)
- **Backend:** Cloudflare Workers + Hono
- **Database:** Cloudflare D1 (SQLite)
- **Cache/Sessions:** Cloudflare KV
- **AI:** Cloudflare Workers AI
- **Queues:** Cloudflare Queues
- **Monorepo:** Turborepo

### Project Structure

```
satuso/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ web/          # React frontend
‚îÇ   ‚îî‚îÄ‚îÄ api/          # Cloudflare Workers API
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îî‚îÄ‚îÄ shared/       # Shared types and utilities
‚îî‚îÄ‚îÄ turbo.json
```

### Computed Field Engine

Computed fields are recalculated based on triggers:

| Field Type   | Recalculation Trigger                  |
|--------------|----------------------------------------|
| Formula      | On dependency change (real-time)       |
| AI Field     | On related data change + daily refresh |
| Enrichment   | On record create + weekly refresh      |

**Staleness Rules:**
- Formula fields: Never stale
- AI fields: Stale after 7 days or if source data changed
- Enrichment: Stale after 30 days

### Queue Architecture for AI Fields

All AI field computations go through Cloudflare Queues:

1. Trigger event (new transcript, field change, scheduled refresh)
2. Job queued with record ID + field type
3. Worker processes: calls Workers AI, writes result to D1
4. Provenance record created (source, timestamp, confidence)
5. UI updates via polling or WebSocket

### Database Schema (Core Tables)

```sql
-- Users
users (id, email, name, password_hash, role, avatar_url, created_at, updated_at)

-- Contacts
contacts (id, name, email, phone, title, company_id, owner_id, status, source, linkedin_url, last_contacted_at, created_at, updated_at)

-- Companies
companies (id, name, domain, industry, employee_count, annual_revenue, logo_url, website, description, owner_id, created_at, updated_at)

-- Deals
deals (id, name, value, stage, probability, contact_id, company_id, owner_id, close_date, 
       spin_situation, spin_problem, spin_implication, spin_need_payoff, spin_progress,
       ai_score, ai_score_reason, stage_changed_at, created_at, updated_at)

-- Activities
activities (id, type, subject, content, deal_id, contact_id, company_id, owner_id, 
            spin_tags, due_date, completed, completed_at, created_at, updated_at)

-- Tasks
tasks (id, subject, content, deal_id, contact_id, owner_id, due_date, priority, 
       completed, completed_at, created_at, updated_at)

-- Workboards (v2)
workboards (id, name, object_type, columns, filters, sort, owner_id, shared, created_at, updated_at)

-- Plays (v2)
plays (id, name, description, workboard_id, triggers, actions, active, owner_id, created_at, updated_at)
```

### API Design

RESTful endpoints with consistent response format:

```typescript
// Success
{ success: true, data: T }

// Error
{ success: false, error: string }

// Paginated
{ success: true, data: { items: T[], page: number, limit: number, total: number, hasMore: boolean } }
```

### Authentication

- JWT tokens stored in KV with 7-day expiration
- PBKDF2 password hashing (100k iterations)
- Session management via Authorization header

### Input Validation

All API routes use Zod schemas for request validation:
- Auth (register/login)
- Contacts (create/update)
- Companies (create/update)
- Deals (create/update/move)
- Tasks (create/update)
- Activities (create/update)

---

## Phased Build Order

### Phase 1: Foundation (Weeks 1-4)
- Workboards v1: Deals table with inline edit, filters, column reordering
- Raw fields + 3 formula fields (days_in_stage, sla_breach, last_activity_days)
- SPIN fields as first-class columns with progress dots
- Basic provenance display (source icon + timestamp)

### Phase 2: SPIN Magic (Weeks 5-8)
- SPIN auto-extraction pipeline (Queue + Workers AI)
- Human validation UI for extracted insights
- SPIN Score computation
- SPIN Coach panel on deal detail

### Phase 3: Actions & Plays (Weeks 9-12)
- Action system: Create task, Draft email, Update field, Alert
- Bulk actions on Workboard selections
- Ship 3 Plays: SPIN Completion, Pipeline Hygiene, At-Risk Deals
- Play success metrics

### Phase 4: Integration & Distribution (Weeks 13-16)
- Salesforce bidirectional sync (companion mode)
- Basic enrichment (Clearbit or Apollo)
- Play sharing / templates
- Invite flows + team onboarding

### Phase 5: Full CRM (Weeks 17+)
- Contacts + Companies Workboards
- Email/calendar sync
- Mobile responsive
- Advanced AI fields

---

## Success Metrics

### Activation
1. User creates first Workboard within 5 minutes of signup
2. First SPIN insight auto-extracted within first call import
3. User runs first Play within first session

### Engagement
4. 80% of deals have SPIN score > 50 within 30 days
5. Average SPIN score increases 25 points in first month
6. 3+ Workboard views created per user

### Value
7. Deals with SPIN score > 75 close at 2x rate of < 50
8. 50% reduction in "stale deal" count within 60 days
9. Managers report 3+ hours/week saved on pipeline review

### Expansion
10. 30% of users enable Salesforce sync within 14 days
11. Teams invite 2+ additional users within 30 days

---

## Competitive Positioning

### vs Salesforce
- **10x simpler** ‚Äî no admin needed, no consultants
- **SPIN methodology built-in** ‚Äî not a bolted-on app
- **AI-native from day 1** ‚Äî not acquired/integrated
- **Fair pricing** ‚Äî no enterprise sales games

### vs HubSpot
- **Sales-first**, not marketing-first
- **Opinionated about methodology** (SPIN) vs generic
- **Faster, lighter**, no bloat

### vs Pipedrive/Close
- **AI does the work**, not just surfaces data
- **Methodology built-in**, not just pipeline stages
- **Workboards** give power-user flexibility

### vs Clay
- **CRM**, not just enrichment/prospecting
- **SPIN discovery**, not just data collection
- **Manages deal lifecycle**, not just lead generation

### vs Gong/Chorus
- **Full CRM**, not just conversation intelligence
- **SPIN insights write back** to deal record
- **Actionable**, not just analytical

---

## What's Deprioritized (v2+)

- Complex forecasting (keep simple; don't compete with Clari)
- Waterfall enrichment (start with simple Clearbit/Apollo integration)
- Multi-vendor enrichment orchestration
- Complex custom field builder (start with predefined AI fields)
- Marketing automation
